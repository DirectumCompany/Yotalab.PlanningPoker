@{
  RenderFragment childContent =
  @<div>
    @if (this.ChildContent != null)
    {
      @this.ChildContent
    }
    else
    {
      @foreach (var item in this.Items)
      {
        <MudMenuItem OnClick="@this.CreateOnClickCallback(item)">
          @if (!string.IsNullOrWhiteSpace(item.Icon))
          {
            <MudIcon Style="pointer-events:none" Class="mud-float-left mr-2" Icon="@item.Icon" Color="@item.IconColor" />
          }
          <MudText Class="mud-float-left">@item.Title</MudText>
        </MudMenuItem>
      }
    }
  </div>;
}

@if (this.ButtonTemplate != null)
{
  <MudMenu Icon="@this.Icon" Direction="Direction.Bottom" OffsetY="true" ActivatorContent="ButtonTemplate">
    <ChildContent>
      @childContent
    </ChildContent>
  </MudMenu>
}
else
{
  <MudMenu Icon="@this.Icon" Direction="Direction.Bottom" OffsetY="true">
    <ChildContent>
      @childContent
    </ChildContent>
  </MudMenu>
}
