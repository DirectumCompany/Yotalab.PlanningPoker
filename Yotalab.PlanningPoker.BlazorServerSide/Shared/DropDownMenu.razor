@{
  RenderFragment childContent =
  @<div>
    @if (this.ChildContent != null)
      {
        @this.ChildContent
      }
      else
      {
        @foreach (var item in this.Items)
        {
          <MudMenuItem OnClick="@this.CreateOnClickCallback(item)">
            <div class="d-flex">
              @if (!string.IsNullOrWhiteSpace(item.Icon))
              {
                <MudIcon Style="pointer-events:none" Class="mr-2" Icon="@item.Icon" Color="@item.IconColor" />
              }
              <MudText>@item.Title</MudText>
            </div>
          </MudMenuItem>
        }
      }
    </div>;
}

@if (this.ButtonTemplate != null)
{
  <MudMenu Icon="@this.Icon" TransformOrigin="Origin.TopLeft" AnchorOrigin="Origin.TopLeft" ActivatorContent="ButtonTemplate">
    <ChildContent>
      @childContent
    </ChildContent>
  </MudMenu>
}
else
{
  <MudMenu Icon="@this.Icon" TransformOrigin="Origin.TopLeft" AnchorOrigin="Origin.TopLeft">
    <ChildContent>
      @childContent
    </ChildContent>
  </MudMenu>
}
